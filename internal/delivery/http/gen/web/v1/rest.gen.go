//go:build go1.22

// Package gen provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.4.1 DO NOT EDIT.
package gen

import (
	"bytes"
	"compress/gzip"
	"context"
	"encoding/base64"
	"encoding/json"
	"fmt"
	"net/http"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
	"github.com/oapi-codegen/runtime"
	strictnethttp "github.com/oapi-codegen/runtime/strictmiddleware/nethttp"
)

// ServerInterface represents all server handlers.
type ServerInterface interface {
	// Creates a post on behalf of an authenticated user.
	// (POST /posts/)
	PostPosts(w http.ResponseWriter, r *http.Request)
	// Delete a post by the requested ID.
	// (DELETE /posts/{id})
	DeletePostsId(w http.ResponseWriter, r *http.Request, id string)
	// Returns a variety of information about a single post specified by the requested ID.
	// (GET /posts/{id})
	GetPostsId(w http.ResponseWriter, r *http.Request, id string, params GetPostsIdParams)
	// Returns a variety of information about user specified by username.
	// (GET /users/by/username/{username})
	GetUsersByUsernameUsername(w http.ResponseWriter, r *http.Request, username string)
	// Returns information about an authorized user.
	// (GET /users/me)
	GetUsersMe(w http.ResponseWriter, r *http.Request)
	// Update information about an authorized user.
	// (PUT /users/me)
	PutUsersMe(w http.ResponseWriter, r *http.Request)
	// Returns a variety of information about a single user specified by the requested ID.
	// (GET /users/{id})
	GetUsersId(w http.ResponseWriter, r *http.Request, id string)
	// Allows a user ID to follow another user.
	// (POST /users/{id}/following)
	PostUsersIdFollowing(w http.ResponseWriter, r *http.Request, id string)
	// Allows an authenticated user ID to mute the target user.
	// (POST /users/{id}/muting)
	PostUsersIdMuting(w http.ResponseWriter, r *http.Request, id string)
	// Returns most recent posts composed a specified user ID
	// (GET /users/{id}/posts)
	GetUsersIdPosts(w http.ResponseWriter, r *http.Request, id string, params GetUsersIdPostsParams)
	// Allows you to retrieve a collection of the most recent posts and reposts posted by you and users you follow.
	// (GET /users/{id}/timeline)
	GetUsersIdTimeline(w http.ResponseWriter, r *http.Request, id string, params GetUsersIdTimelineParams)
	// Allows a user ID to unfollow another user.
	// (DELETE /users/{sourceUserId}/following/{targetUserId})
	DeleteUsersSourceUserIdFollowingTargetUserId(w http.ResponseWriter, r *http.Request, sourceUserId string, targetUserId string)
	// Allows an authenticated user ID to unmute the target user.
	// (DELETE /users/{sourceUserId}/muting/{targetUserId})
	DeleteUsersSourceUserIdMutingTargetUserId(w http.ResponseWriter, r *http.Request, sourceUserId string, targetUserId string)
}

// ServerInterfaceWrapper converts contexts to parameters.
type ServerInterfaceWrapper struct {
	Handler            ServerInterface
	HandlerMiddlewares []MiddlewareFunc
	ErrorHandlerFunc   func(w http.ResponseWriter, r *http.Request, err error)
}

type MiddlewareFunc func(http.Handler) http.Handler

// PostPosts operation middleware
func (siw *ServerInterfaceWrapper) PostPosts(w http.ResponseWriter, r *http.Request) {

	ctx := r.Context()

	ctx = context.WithValue(ctx, OAuthScopes, []string{"general"})

	r = r.WithContext(ctx)

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.PostPosts(w, r)
	}))

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler.ServeHTTP(w, r)
}

// DeletePostsId operation middleware
func (siw *ServerInterfaceWrapper) DeletePostsId(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "id" -------------
	var id string

	err = runtime.BindStyledParameterWithOptions("simple", "id", r.PathValue("id"), &id, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "id", Err: err})
		return
	}

	ctx := r.Context()

	ctx = context.WithValue(ctx, OAuthScopes, []string{"general"})

	r = r.WithContext(ctx)

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.DeletePostsId(w, r, id)
	}))

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler.ServeHTTP(w, r)
}

// GetPostsId operation middleware
func (siw *ServerInterfaceWrapper) GetPostsId(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "id" -------------
	var id string

	err = runtime.BindStyledParameterWithOptions("simple", "id", r.PathValue("id"), &id, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "id", Err: err})
		return
	}

	// Parameter object where we will unmarshal all parameters from the context
	var params GetPostsIdParams

	// ------------- Optional query parameter "expansions" -------------

	err = runtime.BindQueryParameter("form", true, false, "expansions", r.URL.Query(), &params.Expansions)
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "expansions", Err: err})
		return
	}

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetPostsId(w, r, id, params)
	}))

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler.ServeHTTP(w, r)
}

// GetUsersByUsernameUsername operation middleware
func (siw *ServerInterfaceWrapper) GetUsersByUsernameUsername(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "username" -------------
	var username string

	err = runtime.BindStyledParameterWithOptions("simple", "username", r.PathValue("username"), &username, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "username", Err: err})
		return
	}

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetUsersByUsernameUsername(w, r, username)
	}))

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler.ServeHTTP(w, r)
}

// GetUsersMe operation middleware
func (siw *ServerInterfaceWrapper) GetUsersMe(w http.ResponseWriter, r *http.Request) {

	ctx := r.Context()

	ctx = context.WithValue(ctx, OAuthScopes, []string{"general"})

	r = r.WithContext(ctx)

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetUsersMe(w, r)
	}))

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler.ServeHTTP(w, r)
}

// PutUsersMe operation middleware
func (siw *ServerInterfaceWrapper) PutUsersMe(w http.ResponseWriter, r *http.Request) {

	ctx := r.Context()

	ctx = context.WithValue(ctx, OAuthScopes, []string{"general"})

	r = r.WithContext(ctx)

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.PutUsersMe(w, r)
	}))

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler.ServeHTTP(w, r)
}

// GetUsersId operation middleware
func (siw *ServerInterfaceWrapper) GetUsersId(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "id" -------------
	var id string

	err = runtime.BindStyledParameterWithOptions("simple", "id", r.PathValue("id"), &id, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "id", Err: err})
		return
	}

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetUsersId(w, r, id)
	}))

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler.ServeHTTP(w, r)
}

// PostUsersIdFollowing operation middleware
func (siw *ServerInterfaceWrapper) PostUsersIdFollowing(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "id" -------------
	var id string

	err = runtime.BindStyledParameterWithOptions("simple", "id", r.PathValue("id"), &id, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "id", Err: err})
		return
	}

	ctx := r.Context()

	ctx = context.WithValue(ctx, OAuthScopes, []string{"general"})

	r = r.WithContext(ctx)

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.PostUsersIdFollowing(w, r, id)
	}))

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler.ServeHTTP(w, r)
}

// PostUsersIdMuting operation middleware
func (siw *ServerInterfaceWrapper) PostUsersIdMuting(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "id" -------------
	var id string

	err = runtime.BindStyledParameterWithOptions("simple", "id", r.PathValue("id"), &id, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "id", Err: err})
		return
	}

	ctx := r.Context()

	ctx = context.WithValue(ctx, OAuthScopes, []string{"general"})

	r = r.WithContext(ctx)

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.PostUsersIdMuting(w, r, id)
	}))

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler.ServeHTTP(w, r)
}

// GetUsersIdPosts operation middleware
func (siw *ServerInterfaceWrapper) GetUsersIdPosts(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "id" -------------
	var id string

	err = runtime.BindStyledParameterWithOptions("simple", "id", r.PathValue("id"), &id, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "id", Err: err})
		return
	}

	// Parameter object where we will unmarshal all parameters from the context
	var params GetUsersIdPostsParams

	// ------------- Optional query parameter "pageToken" -------------

	err = runtime.BindQueryParameter("form", true, false, "pageToken", r.URL.Query(), &params.PageToken)
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "pageToken", Err: err})
		return
	}

	// ------------- Optional query parameter "maxPageSize" -------------

	err = runtime.BindQueryParameter("form", true, false, "maxPageSize", r.URL.Query(), &params.MaxPageSize)
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "maxPageSize", Err: err})
		return
	}

	// ------------- Optional query parameter "expansions" -------------

	err = runtime.BindQueryParameter("form", true, false, "expansions", r.URL.Query(), &params.Expansions)
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "expansions", Err: err})
		return
	}

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetUsersIdPosts(w, r, id, params)
	}))

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler.ServeHTTP(w, r)
}

// GetUsersIdTimeline operation middleware
func (siw *ServerInterfaceWrapper) GetUsersIdTimeline(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "id" -------------
	var id string

	err = runtime.BindStyledParameterWithOptions("simple", "id", r.PathValue("id"), &id, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "id", Err: err})
		return
	}

	ctx := r.Context()

	ctx = context.WithValue(ctx, OAuthScopes, []string{"general"})

	r = r.WithContext(ctx)

	// Parameter object where we will unmarshal all parameters from the context
	var params GetUsersIdTimelineParams

	// ------------- Optional query parameter "pageToken" -------------

	err = runtime.BindQueryParameter("form", true, false, "pageToken", r.URL.Query(), &params.PageToken)
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "pageToken", Err: err})
		return
	}

	// ------------- Optional query parameter "maxPageSize" -------------

	err = runtime.BindQueryParameter("form", true, false, "maxPageSize", r.URL.Query(), &params.MaxPageSize)
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "maxPageSize", Err: err})
		return
	}

	// ------------- Optional query parameter "expansions" -------------

	err = runtime.BindQueryParameter("form", true, false, "expansions", r.URL.Query(), &params.Expansions)
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "expansions", Err: err})
		return
	}

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetUsersIdTimeline(w, r, id, params)
	}))

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler.ServeHTTP(w, r)
}

// DeleteUsersSourceUserIdFollowingTargetUserId operation middleware
func (siw *ServerInterfaceWrapper) DeleteUsersSourceUserIdFollowingTargetUserId(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "sourceUserId" -------------
	var sourceUserId string

	err = runtime.BindStyledParameterWithOptions("simple", "sourceUserId", r.PathValue("sourceUserId"), &sourceUserId, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "sourceUserId", Err: err})
		return
	}

	// ------------- Path parameter "targetUserId" -------------
	var targetUserId string

	err = runtime.BindStyledParameterWithOptions("simple", "targetUserId", r.PathValue("targetUserId"), &targetUserId, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "targetUserId", Err: err})
		return
	}

	ctx := r.Context()

	ctx = context.WithValue(ctx, OAuthScopes, []string{"general"})

	r = r.WithContext(ctx)

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.DeleteUsersSourceUserIdFollowingTargetUserId(w, r, sourceUserId, targetUserId)
	}))

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler.ServeHTTP(w, r)
}

// DeleteUsersSourceUserIdMutingTargetUserId operation middleware
func (siw *ServerInterfaceWrapper) DeleteUsersSourceUserIdMutingTargetUserId(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "sourceUserId" -------------
	var sourceUserId string

	err = runtime.BindStyledParameterWithOptions("simple", "sourceUserId", r.PathValue("sourceUserId"), &sourceUserId, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "sourceUserId", Err: err})
		return
	}

	// ------------- Path parameter "targetUserId" -------------
	var targetUserId string

	err = runtime.BindStyledParameterWithOptions("simple", "targetUserId", r.PathValue("targetUserId"), &targetUserId, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "targetUserId", Err: err})
		return
	}

	ctx := r.Context()

	ctx = context.WithValue(ctx, OAuthScopes, []string{"general"})

	r = r.WithContext(ctx)

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.DeleteUsersSourceUserIdMutingTargetUserId(w, r, sourceUserId, targetUserId)
	}))

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler.ServeHTTP(w, r)
}

type UnescapedCookieParamError struct {
	ParamName string
	Err       error
}

func (e *UnescapedCookieParamError) Error() string {
	return fmt.Sprintf("error unescaping cookie parameter '%s'", e.ParamName)
}

func (e *UnescapedCookieParamError) Unwrap() error {
	return e.Err
}

type UnmarshalingParamError struct {
	ParamName string
	Err       error
}

func (e *UnmarshalingParamError) Error() string {
	return fmt.Sprintf("Error unmarshaling parameter %s as JSON: %s", e.ParamName, e.Err.Error())
}

func (e *UnmarshalingParamError) Unwrap() error {
	return e.Err
}

type RequiredParamError struct {
	ParamName string
}

func (e *RequiredParamError) Error() string {
	return fmt.Sprintf("Query argument %s is required, but not found", e.ParamName)
}

type RequiredHeaderError struct {
	ParamName string
	Err       error
}

func (e *RequiredHeaderError) Error() string {
	return fmt.Sprintf("Header parameter %s is required, but not found", e.ParamName)
}

func (e *RequiredHeaderError) Unwrap() error {
	return e.Err
}

type InvalidParamFormatError struct {
	ParamName string
	Err       error
}

func (e *InvalidParamFormatError) Error() string {
	return fmt.Sprintf("Invalid format for parameter %s: %s", e.ParamName, e.Err.Error())
}

func (e *InvalidParamFormatError) Unwrap() error {
	return e.Err
}

type TooManyValuesForParamError struct {
	ParamName string
	Count     int
}

func (e *TooManyValuesForParamError) Error() string {
	return fmt.Sprintf("Expected one value for %s, got %d", e.ParamName, e.Count)
}

// Handler creates http.Handler with routing matching OpenAPI spec.
func Handler(si ServerInterface) http.Handler {
	return HandlerWithOptions(si, StdHTTPServerOptions{})
}

// ServeMux is an abstraction of http.ServeMux.
type ServeMux interface {
	HandleFunc(pattern string, handler func(http.ResponseWriter, *http.Request))
	ServeHTTP(w http.ResponseWriter, r *http.Request)
}

type StdHTTPServerOptions struct {
	BaseURL          string
	BaseRouter       ServeMux
	Middlewares      []MiddlewareFunc
	ErrorHandlerFunc func(w http.ResponseWriter, r *http.Request, err error)
}

// HandlerFromMux creates http.Handler with routing matching OpenAPI spec based on the provided mux.
func HandlerFromMux(si ServerInterface, m ServeMux) http.Handler {
	return HandlerWithOptions(si, StdHTTPServerOptions{
		BaseRouter: m,
	})
}

func HandlerFromMuxWithBaseURL(si ServerInterface, m ServeMux, baseURL string) http.Handler {
	return HandlerWithOptions(si, StdHTTPServerOptions{
		BaseURL:    baseURL,
		BaseRouter: m,
	})
}

// HandlerWithOptions creates http.Handler with additional options
func HandlerWithOptions(si ServerInterface, options StdHTTPServerOptions) http.Handler {
	m := options.BaseRouter

	if m == nil {
		m = http.NewServeMux()
	}
	if options.ErrorHandlerFunc == nil {
		options.ErrorHandlerFunc = func(w http.ResponseWriter, r *http.Request, err error) {
			http.Error(w, err.Error(), http.StatusBadRequest)
		}
	}

	wrapper := ServerInterfaceWrapper{
		Handler:            si,
		HandlerMiddlewares: options.Middlewares,
		ErrorHandlerFunc:   options.ErrorHandlerFunc,
	}

	m.HandleFunc("POST "+options.BaseURL+"/posts/", wrapper.PostPosts)
	m.HandleFunc("DELETE "+options.BaseURL+"/posts/{id}", wrapper.DeletePostsId)
	m.HandleFunc("GET "+options.BaseURL+"/posts/{id}", wrapper.GetPostsId)
	m.HandleFunc("GET "+options.BaseURL+"/users/by/username/{username}", wrapper.GetUsersByUsernameUsername)
	m.HandleFunc("GET "+options.BaseURL+"/users/me", wrapper.GetUsersMe)
	m.HandleFunc("PUT "+options.BaseURL+"/users/me", wrapper.PutUsersMe)
	m.HandleFunc("GET "+options.BaseURL+"/users/{id}", wrapper.GetUsersId)
	m.HandleFunc("POST "+options.BaseURL+"/users/{id}/following", wrapper.PostUsersIdFollowing)
	m.HandleFunc("POST "+options.BaseURL+"/users/{id}/muting", wrapper.PostUsersIdMuting)
	m.HandleFunc("GET "+options.BaseURL+"/users/{id}/posts", wrapper.GetUsersIdPosts)
	m.HandleFunc("GET "+options.BaseURL+"/users/{id}/timeline", wrapper.GetUsersIdTimeline)
	m.HandleFunc("DELETE "+options.BaseURL+"/users/{sourceUserId}/following/{targetUserId}", wrapper.DeleteUsersSourceUserIdFollowingTargetUserId)
	m.HandleFunc("DELETE "+options.BaseURL+"/users/{sourceUserId}/muting/{targetUserId}", wrapper.DeleteUsersSourceUserIdMutingTargetUserId)

	return m
}

type PostPostsRequestObject struct {
	Body *PostPostsJSONRequestBody
}

type PostPostsResponseObject interface {
	VisitPostPostsResponse(w http.ResponseWriter) error
}

type PostPosts201JSONResponse PostIdResponse

func (response PostPosts201JSONResponse) VisitPostPostsResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(201)

	return json.NewEncoder(w).Encode(response)
}

type PostPostsdefaultJSONResponse struct {
	Body       ErrorResponse
	StatusCode int
}

func (response PostPostsdefaultJSONResponse) VisitPostPostsResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(response.StatusCode)

	return json.NewEncoder(w).Encode(response.Body)
}

type DeletePostsIdRequestObject struct {
	Id string `json:"id"`
}

type DeletePostsIdResponseObject interface {
	VisitDeletePostsIdResponse(w http.ResponseWriter) error
}

type DeletePostsId200Response struct {
}

func (response DeletePostsId200Response) VisitDeletePostsIdResponse(w http.ResponseWriter) error {
	w.WriteHeader(200)
	return nil
}

type DeletePostsIddefaultJSONResponse struct {
	Body       ErrorResponse
	StatusCode int
}

func (response DeletePostsIddefaultJSONResponse) VisitDeletePostsIdResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(response.StatusCode)

	return json.NewEncoder(w).Encode(response.Body)
}

type GetPostsIdRequestObject struct {
	Id     string `json:"id"`
	Params GetPostsIdParams
}

type GetPostsIdResponseObject interface {
	VisitGetPostsIdResponse(w http.ResponseWriter) error
}

type GetPostsId200JSONResponse PostResponse

func (response GetPostsId200JSONResponse) VisitGetPostsIdResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type GetPostsIddefaultJSONResponse struct {
	Body       ErrorResponse
	StatusCode int
}

func (response GetPostsIddefaultJSONResponse) VisitGetPostsIdResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(response.StatusCode)

	return json.NewEncoder(w).Encode(response.Body)
}

type GetUsersByUsernameUsernameRequestObject struct {
	Username string `json:"username"`
}

type GetUsersByUsernameUsernameResponseObject interface {
	VisitGetUsersByUsernameUsernameResponse(w http.ResponseWriter) error
}

type GetUsersByUsernameUsername200JSONResponse UserShortProjection

func (response GetUsersByUsernameUsername200JSONResponse) VisitGetUsersByUsernameUsernameResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type GetUsersByUsernameUsernamedefaultJSONResponse struct {
	Body       ErrorResponse
	StatusCode int
}

func (response GetUsersByUsernameUsernamedefaultJSONResponse) VisitGetUsersByUsernameUsernameResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(response.StatusCode)

	return json.NewEncoder(w).Encode(response.Body)
}

type GetUsersMeRequestObject struct {
}

type GetUsersMeResponseObject interface {
	VisitGetUsersMeResponse(w http.ResponseWriter) error
}

type GetUsersMe200JSONResponse User

func (response GetUsersMe200JSONResponse) VisitGetUsersMeResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type GetUsersMedefaultJSONResponse struct {
	Body       ErrorResponse
	StatusCode int
}

func (response GetUsersMedefaultJSONResponse) VisitGetUsersMeResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(response.StatusCode)

	return json.NewEncoder(w).Encode(response.Body)
}

type PutUsersMeRequestObject struct {
	Body *PutUsersMeJSONRequestBody
}

type PutUsersMeResponseObject interface {
	VisitPutUsersMeResponse(w http.ResponseWriter) error
}

type PutUsersMe200Response struct {
}

func (response PutUsersMe200Response) VisitPutUsersMeResponse(w http.ResponseWriter) error {
	w.WriteHeader(200)
	return nil
}

type PutUsersMedefaultJSONResponse struct {
	Body       ErrorResponse
	StatusCode int
}

func (response PutUsersMedefaultJSONResponse) VisitPutUsersMeResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(response.StatusCode)

	return json.NewEncoder(w).Encode(response.Body)
}

type GetUsersIdRequestObject struct {
	Id string `json:"id"`
}

type GetUsersIdResponseObject interface {
	VisitGetUsersIdResponse(w http.ResponseWriter) error
}

type GetUsersId200JSONResponse UserShortProjection

func (response GetUsersId200JSONResponse) VisitGetUsersIdResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type GetUsersIddefaultJSONResponse struct {
	Body       ErrorResponse
	StatusCode int
}

func (response GetUsersIddefaultJSONResponse) VisitGetUsersIdResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(response.StatusCode)

	return json.NewEncoder(w).Encode(response.Body)
}

type PostUsersIdFollowingRequestObject struct {
	Id   string `json:"id"`
	Body *PostUsersIdFollowingJSONRequestBody
}

type PostUsersIdFollowingResponseObject interface {
	VisitPostUsersIdFollowingResponse(w http.ResponseWriter) error
}

type PostUsersIdFollowing201Response struct {
}

func (response PostUsersIdFollowing201Response) VisitPostUsersIdFollowingResponse(w http.ResponseWriter) error {
	w.WriteHeader(201)
	return nil
}

type PostUsersIdFollowingdefaultJSONResponse struct {
	Body       ErrorResponse
	StatusCode int
}

func (response PostUsersIdFollowingdefaultJSONResponse) VisitPostUsersIdFollowingResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(response.StatusCode)

	return json.NewEncoder(w).Encode(response.Body)
}

type PostUsersIdMutingRequestObject struct {
	Id   string `json:"id"`
	Body *PostUsersIdMutingJSONRequestBody
}

type PostUsersIdMutingResponseObject interface {
	VisitPostUsersIdMutingResponse(w http.ResponseWriter) error
}

type PostUsersIdMuting201Response struct {
}

func (response PostUsersIdMuting201Response) VisitPostUsersIdMutingResponse(w http.ResponseWriter) error {
	w.WriteHeader(201)
	return nil
}

type PostUsersIdMutingdefaultJSONResponse struct {
	Body       ErrorResponse
	StatusCode int
}

func (response PostUsersIdMutingdefaultJSONResponse) VisitPostUsersIdMutingResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(response.StatusCode)

	return json.NewEncoder(w).Encode(response.Body)
}

type GetUsersIdPostsRequestObject struct {
	Id     string `json:"id"`
	Params GetUsersIdPostsParams
}

type GetUsersIdPostsResponseObject interface {
	VisitGetUsersIdPostsResponse(w http.ResponseWriter) error
}

type GetUsersIdPosts200JSONResponse ListPostResponse

func (response GetUsersIdPosts200JSONResponse) VisitGetUsersIdPostsResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type GetUsersIdPostsdefaultJSONResponse struct {
	Body       ErrorResponse
	StatusCode int
}

func (response GetUsersIdPostsdefaultJSONResponse) VisitGetUsersIdPostsResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(response.StatusCode)

	return json.NewEncoder(w).Encode(response.Body)
}

type GetUsersIdTimelineRequestObject struct {
	Id     string `json:"id"`
	Params GetUsersIdTimelineParams
}

type GetUsersIdTimelineResponseObject interface {
	VisitGetUsersIdTimelineResponse(w http.ResponseWriter) error
}

type GetUsersIdTimeline200JSONResponse ListPostResponse

func (response GetUsersIdTimeline200JSONResponse) VisitGetUsersIdTimelineResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type GetUsersIdTimelinedefaultJSONResponse struct {
	Body       ErrorResponse
	StatusCode int
}

func (response GetUsersIdTimelinedefaultJSONResponse) VisitGetUsersIdTimelineResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(response.StatusCode)

	return json.NewEncoder(w).Encode(response.Body)
}

type DeleteUsersSourceUserIdFollowingTargetUserIdRequestObject struct {
	SourceUserId string `json:"sourceUserId"`
	TargetUserId string `json:"targetUserId"`
}

type DeleteUsersSourceUserIdFollowingTargetUserIdResponseObject interface {
	VisitDeleteUsersSourceUserIdFollowingTargetUserIdResponse(w http.ResponseWriter) error
}

type DeleteUsersSourceUserIdFollowingTargetUserId200Response struct {
}

func (response DeleteUsersSourceUserIdFollowingTargetUserId200Response) VisitDeleteUsersSourceUserIdFollowingTargetUserIdResponse(w http.ResponseWriter) error {
	w.WriteHeader(200)
	return nil
}

type DeleteUsersSourceUserIdFollowingTargetUserIddefaultJSONResponse struct {
	Body       ErrorResponse
	StatusCode int
}

func (response DeleteUsersSourceUserIdFollowingTargetUserIddefaultJSONResponse) VisitDeleteUsersSourceUserIdFollowingTargetUserIdResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(response.StatusCode)

	return json.NewEncoder(w).Encode(response.Body)
}

type DeleteUsersSourceUserIdMutingTargetUserIdRequestObject struct {
	SourceUserId string `json:"sourceUserId"`
	TargetUserId string `json:"targetUserId"`
}

type DeleteUsersSourceUserIdMutingTargetUserIdResponseObject interface {
	VisitDeleteUsersSourceUserIdMutingTargetUserIdResponse(w http.ResponseWriter) error
}

type DeleteUsersSourceUserIdMutingTargetUserId200Response struct {
}

func (response DeleteUsersSourceUserIdMutingTargetUserId200Response) VisitDeleteUsersSourceUserIdMutingTargetUserIdResponse(w http.ResponseWriter) error {
	w.WriteHeader(200)
	return nil
}

type DeleteUsersSourceUserIdMutingTargetUserIddefaultJSONResponse struct {
	Body       ErrorResponse
	StatusCode int
}

func (response DeleteUsersSourceUserIdMutingTargetUserIddefaultJSONResponse) VisitDeleteUsersSourceUserIdMutingTargetUserIdResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(response.StatusCode)

	return json.NewEncoder(w).Encode(response.Body)
}

// StrictServerInterface represents all server handlers.
type StrictServerInterface interface {
	// Creates a post on behalf of an authenticated user.
	// (POST /posts/)
	PostPosts(ctx context.Context, request PostPostsRequestObject) (PostPostsResponseObject, error)
	// Delete a post by the requested ID.
	// (DELETE /posts/{id})
	DeletePostsId(ctx context.Context, request DeletePostsIdRequestObject) (DeletePostsIdResponseObject, error)
	// Returns a variety of information about a single post specified by the requested ID.
	// (GET /posts/{id})
	GetPostsId(ctx context.Context, request GetPostsIdRequestObject) (GetPostsIdResponseObject, error)
	// Returns a variety of information about user specified by username.
	// (GET /users/by/username/{username})
	GetUsersByUsernameUsername(ctx context.Context, request GetUsersByUsernameUsernameRequestObject) (GetUsersByUsernameUsernameResponseObject, error)
	// Returns information about an authorized user.
	// (GET /users/me)
	GetUsersMe(ctx context.Context, request GetUsersMeRequestObject) (GetUsersMeResponseObject, error)
	// Update information about an authorized user.
	// (PUT /users/me)
	PutUsersMe(ctx context.Context, request PutUsersMeRequestObject) (PutUsersMeResponseObject, error)
	// Returns a variety of information about a single user specified by the requested ID.
	// (GET /users/{id})
	GetUsersId(ctx context.Context, request GetUsersIdRequestObject) (GetUsersIdResponseObject, error)
	// Allows a user ID to follow another user.
	// (POST /users/{id}/following)
	PostUsersIdFollowing(ctx context.Context, request PostUsersIdFollowingRequestObject) (PostUsersIdFollowingResponseObject, error)
	// Allows an authenticated user ID to mute the target user.
	// (POST /users/{id}/muting)
	PostUsersIdMuting(ctx context.Context, request PostUsersIdMutingRequestObject) (PostUsersIdMutingResponseObject, error)
	// Returns most recent posts composed a specified user ID
	// (GET /users/{id}/posts)
	GetUsersIdPosts(ctx context.Context, request GetUsersIdPostsRequestObject) (GetUsersIdPostsResponseObject, error)
	// Allows you to retrieve a collection of the most recent posts and reposts posted by you and users you follow.
	// (GET /users/{id}/timeline)
	GetUsersIdTimeline(ctx context.Context, request GetUsersIdTimelineRequestObject) (GetUsersIdTimelineResponseObject, error)
	// Allows a user ID to unfollow another user.
	// (DELETE /users/{sourceUserId}/following/{targetUserId})
	DeleteUsersSourceUserIdFollowingTargetUserId(ctx context.Context, request DeleteUsersSourceUserIdFollowingTargetUserIdRequestObject) (DeleteUsersSourceUserIdFollowingTargetUserIdResponseObject, error)
	// Allows an authenticated user ID to unmute the target user.
	// (DELETE /users/{sourceUserId}/muting/{targetUserId})
	DeleteUsersSourceUserIdMutingTargetUserId(ctx context.Context, request DeleteUsersSourceUserIdMutingTargetUserIdRequestObject) (DeleteUsersSourceUserIdMutingTargetUserIdResponseObject, error)
}

type StrictHandlerFunc = strictnethttp.StrictHTTPHandlerFunc
type StrictMiddlewareFunc = strictnethttp.StrictHTTPMiddlewareFunc

type StrictHTTPServerOptions struct {
	RequestErrorHandlerFunc  func(w http.ResponseWriter, r *http.Request, err error)
	ResponseErrorHandlerFunc func(w http.ResponseWriter, r *http.Request, err error)
}

func NewStrictHandler(ssi StrictServerInterface, middlewares []StrictMiddlewareFunc) ServerInterface {
	return &strictHandler{ssi: ssi, middlewares: middlewares, options: StrictHTTPServerOptions{
		RequestErrorHandlerFunc: func(w http.ResponseWriter, r *http.Request, err error) {
			http.Error(w, err.Error(), http.StatusBadRequest)
		},
		ResponseErrorHandlerFunc: func(w http.ResponseWriter, r *http.Request, err error) {
			http.Error(w, err.Error(), http.StatusInternalServerError)
		},
	}}
}

func NewStrictHandlerWithOptions(ssi StrictServerInterface, middlewares []StrictMiddlewareFunc, options StrictHTTPServerOptions) ServerInterface {
	return &strictHandler{ssi: ssi, middlewares: middlewares, options: options}
}

type strictHandler struct {
	ssi         StrictServerInterface
	middlewares []StrictMiddlewareFunc
	options     StrictHTTPServerOptions
}

// PostPosts operation middleware
func (sh *strictHandler) PostPosts(w http.ResponseWriter, r *http.Request) {
	var request PostPostsRequestObject

	var body PostPostsJSONRequestBody
	if err := json.NewDecoder(r.Body).Decode(&body); err != nil {
		sh.options.RequestErrorHandlerFunc(w, r, fmt.Errorf("can't decode JSON body: %w", err))
		return
	}
	request.Body = &body

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.PostPosts(ctx, request.(PostPostsRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostPosts")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(PostPostsResponseObject); ok {
		if err := validResponse.VisitPostPostsResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// DeletePostsId operation middleware
func (sh *strictHandler) DeletePostsId(w http.ResponseWriter, r *http.Request, id string) {
	var request DeletePostsIdRequestObject

	request.Id = id

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.DeletePostsId(ctx, request.(DeletePostsIdRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "DeletePostsId")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(DeletePostsIdResponseObject); ok {
		if err := validResponse.VisitDeletePostsIdResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetPostsId operation middleware
func (sh *strictHandler) GetPostsId(w http.ResponseWriter, r *http.Request, id string, params GetPostsIdParams) {
	var request GetPostsIdRequestObject

	request.Id = id
	request.Params = params

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.GetPostsId(ctx, request.(GetPostsIdRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetPostsId")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(GetPostsIdResponseObject); ok {
		if err := validResponse.VisitGetPostsIdResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetUsersByUsernameUsername operation middleware
func (sh *strictHandler) GetUsersByUsernameUsername(w http.ResponseWriter, r *http.Request, username string) {
	var request GetUsersByUsernameUsernameRequestObject

	request.Username = username

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.GetUsersByUsernameUsername(ctx, request.(GetUsersByUsernameUsernameRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetUsersByUsernameUsername")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(GetUsersByUsernameUsernameResponseObject); ok {
		if err := validResponse.VisitGetUsersByUsernameUsernameResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetUsersMe operation middleware
func (sh *strictHandler) GetUsersMe(w http.ResponseWriter, r *http.Request) {
	var request GetUsersMeRequestObject

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.GetUsersMe(ctx, request.(GetUsersMeRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetUsersMe")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(GetUsersMeResponseObject); ok {
		if err := validResponse.VisitGetUsersMeResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// PutUsersMe operation middleware
func (sh *strictHandler) PutUsersMe(w http.ResponseWriter, r *http.Request) {
	var request PutUsersMeRequestObject

	var body PutUsersMeJSONRequestBody
	if err := json.NewDecoder(r.Body).Decode(&body); err != nil {
		sh.options.RequestErrorHandlerFunc(w, r, fmt.Errorf("can't decode JSON body: %w", err))
		return
	}
	request.Body = &body

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.PutUsersMe(ctx, request.(PutUsersMeRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PutUsersMe")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(PutUsersMeResponseObject); ok {
		if err := validResponse.VisitPutUsersMeResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetUsersId operation middleware
func (sh *strictHandler) GetUsersId(w http.ResponseWriter, r *http.Request, id string) {
	var request GetUsersIdRequestObject

	request.Id = id

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.GetUsersId(ctx, request.(GetUsersIdRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetUsersId")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(GetUsersIdResponseObject); ok {
		if err := validResponse.VisitGetUsersIdResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// PostUsersIdFollowing operation middleware
func (sh *strictHandler) PostUsersIdFollowing(w http.ResponseWriter, r *http.Request, id string) {
	var request PostUsersIdFollowingRequestObject

	request.Id = id

	var body PostUsersIdFollowingJSONRequestBody
	if err := json.NewDecoder(r.Body).Decode(&body); err != nil {
		sh.options.RequestErrorHandlerFunc(w, r, fmt.Errorf("can't decode JSON body: %w", err))
		return
	}
	request.Body = &body

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.PostUsersIdFollowing(ctx, request.(PostUsersIdFollowingRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostUsersIdFollowing")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(PostUsersIdFollowingResponseObject); ok {
		if err := validResponse.VisitPostUsersIdFollowingResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// PostUsersIdMuting operation middleware
func (sh *strictHandler) PostUsersIdMuting(w http.ResponseWriter, r *http.Request, id string) {
	var request PostUsersIdMutingRequestObject

	request.Id = id

	var body PostUsersIdMutingJSONRequestBody
	if err := json.NewDecoder(r.Body).Decode(&body); err != nil {
		sh.options.RequestErrorHandlerFunc(w, r, fmt.Errorf("can't decode JSON body: %w", err))
		return
	}
	request.Body = &body

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.PostUsersIdMuting(ctx, request.(PostUsersIdMutingRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostUsersIdMuting")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(PostUsersIdMutingResponseObject); ok {
		if err := validResponse.VisitPostUsersIdMutingResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetUsersIdPosts operation middleware
func (sh *strictHandler) GetUsersIdPosts(w http.ResponseWriter, r *http.Request, id string, params GetUsersIdPostsParams) {
	var request GetUsersIdPostsRequestObject

	request.Id = id
	request.Params = params

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.GetUsersIdPosts(ctx, request.(GetUsersIdPostsRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetUsersIdPosts")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(GetUsersIdPostsResponseObject); ok {
		if err := validResponse.VisitGetUsersIdPostsResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetUsersIdTimeline operation middleware
func (sh *strictHandler) GetUsersIdTimeline(w http.ResponseWriter, r *http.Request, id string, params GetUsersIdTimelineParams) {
	var request GetUsersIdTimelineRequestObject

	request.Id = id
	request.Params = params

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.GetUsersIdTimeline(ctx, request.(GetUsersIdTimelineRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetUsersIdTimeline")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(GetUsersIdTimelineResponseObject); ok {
		if err := validResponse.VisitGetUsersIdTimelineResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// DeleteUsersSourceUserIdFollowingTargetUserId operation middleware
func (sh *strictHandler) DeleteUsersSourceUserIdFollowingTargetUserId(w http.ResponseWriter, r *http.Request, sourceUserId string, targetUserId string) {
	var request DeleteUsersSourceUserIdFollowingTargetUserIdRequestObject

	request.SourceUserId = sourceUserId
	request.TargetUserId = targetUserId

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.DeleteUsersSourceUserIdFollowingTargetUserId(ctx, request.(DeleteUsersSourceUserIdFollowingTargetUserIdRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "DeleteUsersSourceUserIdFollowingTargetUserId")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(DeleteUsersSourceUserIdFollowingTargetUserIdResponseObject); ok {
		if err := validResponse.VisitDeleteUsersSourceUserIdFollowingTargetUserIdResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// DeleteUsersSourceUserIdMutingTargetUserId operation middleware
func (sh *strictHandler) DeleteUsersSourceUserIdMutingTargetUserId(w http.ResponseWriter, r *http.Request, sourceUserId string, targetUserId string) {
	var request DeleteUsersSourceUserIdMutingTargetUserIdRequestObject

	request.SourceUserId = sourceUserId
	request.TargetUserId = targetUserId

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.DeleteUsersSourceUserIdMutingTargetUserId(ctx, request.(DeleteUsersSourceUserIdMutingTargetUserIdRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "DeleteUsersSourceUserIdMutingTargetUserId")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(DeleteUsersSourceUserIdMutingTargetUserIdResponseObject); ok {
		if err := validResponse.VisitDeleteUsersSourceUserIdMutingTargetUserIdResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"AAAA//+CRCWftDAAAA==",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
